package renoise

import (
	"testing"

	log "github.com/schollz/logger"
	"github.com/stretchr/testify/assert"
)

func TestUnzip(t *testing.T) {
	log.SetLevel("trace")
	DebugMode = true
	filename, start, end, err := GetSliceMarkers("amen.xrni")
	assert.Nil(t, err)
	assert.Equal(t, "Sample00 (Amen Brother (Version 1) 1).flac", filename)
	assert.Equal(t, []float64{0, 0.060762520193861067, 0.1264038772213247, 0.1922907915993538, 0.22509208400646202, 0.25444911147011307, 0.2844652665589661, 0.31333117932148624, 0.3469725363489499, 0.37339579967689823, 0.43980613893376413, 0.47061066235864296, 0.5015379644588045, 0.5635864297253634, 0.627075928917609, 0.6926720516962843, 0.7216284329563812, 0.7544168012924071, 0.781124394184168, 0.8128142164781906, 0.8469983844911148, 0.8740678513731825, 0.9395993537964459, 0.9710500807754443}, start)
	assert.Equal(t, []float64{0.060762520193861067, 0.1264038772213247, 0.1922907915993538, 0.22509208400646202, 0.25444911147011307, 0.2844652665589661, 0.31333117932148624, 0.3469725363489499, 0.37339579967689823, 0.43980613893376413, 0.47061066235864296, 0.5015379644588045, 0.5635864297253634, 0.627075928917609, 0.6926720516962843, 0.7216284329563812, 0.7544168012924071, 0.781124394184168, 0.8128142164781906, 0.8469983844911148, 0.8740678513731825, 0.9395993537964459, 0.9710500807754443, 1}, end)
}

func TestDoesNotExist(t *testing.T) {
	_, _, _, err := GetSliceMarkers("does not exist.xrni")
	assert.NotNil(t, err)
}
